!function(t,e,n,i){"use strict";e.JoomlaTinyMCE={setupEditors:function(t){var n=t||i,o=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{};[].slice.call(n.querySelectorAll(".js-editor-tinymce")).forEach(function(t){var n=t.querySelector("textarea");e.JoomlaTinyMCE.setupEditor(n,o)})},setupEditor:function(o,s){if(!e.editors.instances[o.id]){var r=o?o.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",a=s&&s.tinyMCE||{},d=a.default||{},c=a[r]?a[r]:d;c=c.joomlaMergeDefaults?e.extend(e.extend({},d),c):e.extend({},c),o&&(c.selector=null,c.target=o);var u=[];Object.keys(c.joomlaExtButtons.names).map(function(t){return c.joomlaExtButtons.names[t]}).forEach(function(t){var e={};e.text=t.name,e.icon=t.icon,t.href?e.onclick=function(){i.getElementById(t.id+"Modal").open()}:e.onclick=function(){new Function(t.click)()},u.push(e)}),c.setup=function(t){t.addButton("jxtdbuttons",{type:"menubutton",text:e.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:u})},void 0!==n.InstallTrigger&&(delete c.external_plugins,delete c.plugins);var l=new t.Editor(o.id,c,tinymce.EditorManager);l.render(),e.editors.instances[o.id]={getValue:function(){return e.editors.instances[o.id].instance.getContent()},setValue:function(t){return e.editors.instances[o.id].instance.setContent(t)},replaceSelection:function(t){return e.editors.instances[o.id].instance.execCommand("mceInsertContent",!1,t)},id:o.id,instance:l,onSave:function(){return e.editors.instances[o.id].instance.isHidden()&&e.editors.instances[o.id].instance.show(),""}},i.getElementById(l.id).form.addEventListener("submit",function(){return e.editors.instances[l.targetElm.id].onSave()})}}},i.addEventListener("DOMContentLoaded",function(){e.JoomlaTinyMCE.setupEditors(i)}),i.addEventListener("joomla:updated",function(t){return e.JoomlaTinyMCE.setupEditors(t.target)})}(window.tinyMCE,Joomla,window,document);
